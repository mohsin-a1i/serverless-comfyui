<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Runpod ComfyUI</title>
    <style>
        body { 
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #2F2F2F;
        }
        img { 
            max-width: 300px; 
            display: block; 
            margin: 10px;
            border-radius: 5px;
        }
        button { 
            margin: 10px; 
            padding: 10px 20px; 
            font-size: 16px; 
            background-color: #76B900;
            color: white;
            cursor: pointer;
            border-radius: 5px;
            border: none;
            outline: none;
        }
        input[type="file"] {
            display: none;
        }
        label {  
            display: inline-block;
            margin: 10px;
            padding: 10px 20px;
            background-color: #ffffff;
            color: #000000;
            cursor: pointer;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <input type="file" id="image" accept="image/*">
    <label for="image">Select starting image</label>
    <button id="animateButton">Animate</button>

    <img id="preview">

    <script>
        const imageInput = document.getElementById('image');
        const previewImg = document.getElementById('preview');

        const animateButton = document.getElementById('animateButton');
        const responseOutput = document.getElementById('responseOutput');

        imageInput.addEventListener('change', () => {
            const file = imageInput.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = () => {
                const base64String = reader.result;
                previewImg.src = base64String;
            };
            reader.readAsDataURL(file);
        });

        animateButton.addEventListener('click', async () => {
            if (!previewImg.src) {
                alert('Select a starting image');
                return;
            }

            try {
                const response = await fetch("https://api.runpod.ai/v2/pebot8vq9n9104/runsync", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": "Bearer <token>"
                    },
                    body: JSON.stringify({
                        "input" : {
                            "workflow": JSON.parse(document.getElementById('workflow').textContent),
                            "images": [{
                                "name": "input.png",
                                "image": previewImg.src
                            }]
                        }
                    })
                });

                const data = await response.json();
                console.log(stringify(data, null, 2))
            } catch (err) {
                console.log('Error: ' + err)
            }
        });


    </script>

    <script type="application/json" id="workflow">{"84":{"inputs":{"clip_name":"umt5-xxl-enc-bf16.safetensors","type":"wan","device":"default"},"class_type":"CLIPLoader","_meta":{"title":"LoadCLIP"}},"90":{"inputs":{"vae_name":"Wan2_1_VAE_bf16.safetensors"},"class_type":"VAELoader","_meta":{"title":"LoadVAE"}},"97":{"inputs":{"image":"input.png"},"class_type":"LoadImage","_meta":{"title":"LoadImage"}},"101":{"inputs":{"lora_name":"wan2.2_i2v_A14b_high_noise_lora_rank64_lightx2v_4step_1022.safetensors","strength_model":1,"model":["207",0]},"class_type":"LoraLoaderModelOnly","_meta":{"title":"LoraLoaderModelOnly"}},"102":{"inputs":{"lora_name":"wan2.2_i2v_A14b_low_noise_lora_rank64_lightx2v_4step_1022.safetensors","strength_model":1,"model":["208",0]},"class_type":"LoraLoaderModelOnly","_meta":{"title":"LoraLoaderModelOnly"}},"104":{"inputs":{"shift":5,"model":["141",0]},"class_type":"ModelSamplingSD3","_meta":{"title":"ModelSamplingSD3"}},"122":{"inputs":{"scheduler":"simple","steps":6,"denoise":1,"model":["104",0]},"class_type":"BasicScheduler","_meta":{"title":"BasicScheduler"}},"127":{"inputs":{"sampler_name":"euler"},"class_type":"KSamplerSelect","_meta":{"title":"KSamplerSelect"}},"128":{"inputs":{"step":3,"sigmas":["122",0]},"class_type":"SplitSigmas","_meta":{"title":"SplitSigmas"}},"135":{"inputs":{"pixels":["136",0],"vae":["90",0]},"class_type":"VAEEncode","_meta":{"title":"VAEEncode"}},"136":{"inputs":{"width":1024,"height":1344,"upscale_method":"lanczos","keep_proportion":"crop","pad_color":"0,0,0","crop_position":"center","divisible_by":2,"device":"cpu","image":["97",0]},"class_type":"ImageResizeKJv2","_meta":{"title":"ResizeImagev2"}},"141":{"inputs":{"lora_name":"SVI_v2_PRO_Wan2.2-I2V-A14B_HIGH_lora_rank_128_fp16.safetensors","strength_model":0,"model":["205",0]},"class_type":"LoraLoaderModelOnly","_meta":{"title":"LoraLoaderModelOnly"}},"142":{"inputs":{"lora_name":"SVI_v2_PRO_Wan2.2-I2V-A14B_LOW_lora_rank_128_fp16.safetensors","strength_model":0,"model":["206",0]},"class_type":"LoraLoaderModelOnly","_meta":{"title":"LoraLoaderModelOnly"}},"182":{"inputs":{"noise_seed":43},"class_type":"RandomNoise","_meta":{"title":"RandomNoise"}},"189":{"inputs":{"noise_seed":43},"class_type":"RandomNoise","_meta":{"title":"RandomNoise"}},"199":{"inputs":{"noise_seed":43},"class_type":"RandomNoise","_meta":{"title":"RandomNoise"}},"205":{"inputs":{"lora_name":"SVI_v2_PRO_Wan2.2-I2V-A14B_HIGH_lora_rank_128_fp16.safetensors","strength_model":1,"model":["101",0]},"class_type":"LoraLoaderModelOnly","_meta":{"title":"LoraLoaderModelOnly"}},"206":{"inputs":{"lora_name":"SVI_v2_PRO_Wan2.2-I2V-A14B_LOW_lora_rank_128_fp16.safetensors","strength_model":1,"model":["102",0]},"class_type":"LoraLoaderModelOnly","_meta":{"title":"LoraLoaderModelOnly"}},"207":{"inputs":{"ckpt_name":"Wan2_2-I2V-A14B-HIGH_bf16.safetensors","weight_dtype":"default","compute_dtype":"default","patch_cublaslinear":false,"sage_attention":"auto","enable_fp16_accumulation":false},"class_type":"CheckpointLoaderKJ","_meta":{"title":"CheckpointLoaderKJ"}},"208":{"inputs":{"ckpt_name":"Wan2_2-I2V-A14B-LOW_bf16.safetensors","weight_dtype":"default","compute_dtype":"default","patch_cublaslinear":false,"sage_attention":"auto","enable_fp16_accumulation":false},"class_type":"CheckpointLoaderKJ","_meta":{"title":"CheckpointLoaderKJ"}},"209":{"inputs":{"filename_prefix":"video","format":"auto","codec":"auto","video":["210",0]},"class_type":"SaveVideo","_meta":{"title":"SaveVideo"}},"210":{"inputs":{"fps":16,"images":["203:168",2]},"class_type":"CreateVideo","_meta":{"title":"CreateVideo"}},"193:183":{"inputs":{},"class_type":"DisableNoise","_meta":{"title":"DisableNoise"}},"181:183":{"inputs":{},"class_type":"DisableNoise","_meta":{"title":"DisableNoise"}},"203:183":{"inputs":{},"class_type":"DisableNoise","_meta":{"title":"DisableNoise"}},"193:182":{"inputs":{"text":"色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走","clip":["84",0]},"class_type":"CLIPTextEncode","_meta":{"title":"CLIPTextEncode(Prompt)"}},"193:152":{"inputs":{"text":"Girlsitsonaman'sface","clip":["84",0]},"class_type":"CLIPTextEncode","_meta":{"title":"CLIPTextEncode(PositivePrompt)"}},"181:182":{"inputs":{"text":"色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走","clip":["84",0]},"class_type":"CLIPTextEncode","_meta":{"title":"CLIPTextEncode(Prompt)"}},"181:152":{"inputs":{"text":"Man'sfacesinksintogirlsass","clip":["84",0]},"class_type":"CLIPTextEncode","_meta":{"title":"CLIPTextEncode(PositivePrompt)"}},"203:182":{"inputs":{"text":"色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走","clip":["84",0]},"class_type":"CLIPTextEncode","_meta":{"title":"CLIPTextEncode(Prompt)"}},"203:152":{"inputs":{"text":"Girlfartsonman'sface","clip":["84",0]},"class_type":"CLIPTextEncode","_meta":{"title":"CLIPTextEncode(PositivePrompt)"}},"193:160":{"inputs":{"length":81,"motion_latent_count":0,"positive":["193:152",0],"negative":["193:182",0],"anchor_samples":["135",0]},"class_type":"WanImageToVideoSVIPro","_meta":{"title":"WanImageToVideoSVIPro"}},"193:159":{"inputs":{"cfg":1,"start_percent":0,"end_percent":1,"model":["142",0],"positive":["193:160",0],"negative":["193:160",1]},"class_type":"ScheduledCFGGuidance","_meta":{"title":"ScheduledCFGGuidance"}},"193:158":{"inputs":{"cfg":1,"start_percent":0,"end_percent":1,"model":["141",0],"positive":["193:160",0],"negative":["193:160",1]},"class_type":"ScheduledCFGGuidance","_meta":{"title":"ScheduledCFGGuidance"}},"193:185":{"inputs":{"noise":["189",0],"guider":["193:158",0],"sampler":["127",0],"sigmas":["128",0],"latent_image":["193:160",2]},"class_type":"SamplerCustomAdvanced","_meta":{"title":"SamplerCustomAdvanced"}},"193:184":{"inputs":{"noise":["193:183",0],"guider":["193:159",0],"sampler":["127",0],"sigmas":["128",1],"latent_image":["193:185",0]},"class_type":"SamplerCustomAdvanced","_meta":{"title":"SamplerCustomAdvanced"}},"193:162":{"inputs":{"samples":["193:184",0],"vae":["90",0]},"class_type":"VAEDecode","_meta":{"title":"VAEDecode"}},"181:160":{"inputs":{"length":81,"motion_latent_count":1,"positive":["181:152",0],"negative":["181:182",0],"anchor_samples":["135",0],"prev_samples":["193:184",0]},"class_type":"WanImageToVideoSVIPro","_meta":{"title":"WanImageToVideoSVIPro"}},"181:159":{"inputs":{"cfg":1,"start_percent":0,"end_percent":1,"model":["142",0],"positive":["181:160",0],"negative":["181:160",1]},"class_type":"ScheduledCFGGuidance","_meta":{"title":"ScheduledCFGGuidance"}},"181:158":{"inputs":{"cfg":1,"start_percent":0,"end_percent":1,"model":["141",0],"positive":["181:160",0],"negative":["181:160",1]},"class_type":"ScheduledCFGGuidance","_meta":{"title":"ScheduledCFGGuidance"}},"181:185":{"inputs":{"noise":["182",0],"guider":["181:158",0],"sampler":["127",0],"sigmas":["128",0],"latent_image":["181:160",2]},"class_type":"SamplerCustomAdvanced","_meta":{"title":"SamplerCustomAdvanced"}},"181:184":{"inputs":{"noise":["181:183",0],"guider":["181:159",0],"sampler":["127",0],"sigmas":["128",1],"latent_image":["181:185",0]},"class_type":"SamplerCustomAdvanced","_meta":{"title":"SamplerCustomAdvanced"}},"181:162":{"inputs":{"samples":["181:184",0],"vae":["90",0]},"class_type":"VAEDecode","_meta":{"title":"VAEDecode"}},"203:160":{"inputs":{"length":81,"motion_latent_count":1,"positive":["203:152",0],"negative":["203:182",0],"anchor_samples":["135",0],"prev_samples":["181:184",0]},"class_type":"WanImageToVideoSVIPro","_meta":{"title":"WanImageToVideoSVIPro"}},"181:168":{"inputs":{"overlap":5,"overlap_side":"source","overlap_mode":"linear_blend","source_images":["193:162",0],"new_images":["181:162",0]},"class_type":"ImageBatchExtendWithOverlap","_meta":{"title":"ImageBatchExtendWithOverlap"}},"203:159":{"inputs":{"cfg":1,"start_percent":0,"end_percent":1,"model":["142",0],"positive":["203:160",0],"negative":["203:160",1]},"class_type":"ScheduledCFGGuidance","_meta":{"title":"ScheduledCFGGuidance"}},"203:158":{"inputs":{"cfg":1,"start_percent":0,"end_percent":1,"model":["141",0],"positive":["203:160",0],"negative":["203:160",1]},"class_type":"ScheduledCFGGuidance","_meta":{"title":"ScheduledCFGGuidance"}},"203:185":{"inputs":{"noise":["199",0],"guider":["203:158",0],"sampler":["127",0],"sigmas":["128",0],"latent_image":["203:160",2]},"class_type":"SamplerCustomAdvanced","_meta":{"title":"SamplerCustomAdvanced"}},"203:184":{"inputs":{"noise":["203:183",0],"guider":["203:159",0],"sampler":["127",0],"sigmas":["128",1],"latent_image":["203:185",0]},"class_type":"SamplerCustomAdvanced","_meta":{"title":"SamplerCustomAdvanced"}},"203:162":{"inputs":{"samples":["203:184",0],"vae":["90",0]},"class_type":"VAEDecode","_meta":{"title":"VAEDecode"}},"203:168":{"inputs":{"overlap":5,"overlap_side":"source","overlap_mode":"linear_blend","source_images":["181:168",2],"new_images":["203:162",0]},"class_type":"ImageBatchExtendWithOverlap","_meta":{"title":"ImageBatchExtendWithOverlap"}}}</script>
</body>
</html>
