<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Runpod ComfyUI</title>
    <style>
        body { 
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #2F2F2F;
        }
        img { 
            max-width: 300px; 
            display: block; 
            margin: 10px;
            border-radius: 5px;
        }
        button { 
            margin: 10px; 
            padding: 10px 20px; 
            font-size: 16px; 
            background-color: #76B900;
            color: white;
            cursor: pointer;
            border-radius: 5px;
            border: none;
            outline: none;
        }
        input[type="file"] {
            display: none;
        }
        label {  
            display: inline-block;
            margin: 10px;
            padding: 10px 20px;
            background-color: #ffffff;
            color: #000000;
            cursor: pointer;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <input type="file" id="image" accept="image/*">
    <label for="image">Select starting image</label>
    <button id="animateButton">Animate</button>

    <img id="preview">

    <script>
        const imageInput = document.getElementById('image');
        const previewImg = document.getElementById('preview');

        const animateButton = document.getElementById('animateButton');
        const responseOutput = document.getElementById('responseOutput');

        imageInput.addEventListener('change', () => {
            const file = imageInput.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = () => {
                const base64String = reader.result;
                previewImg.src = base64String;
            };
            reader.readAsDataURL(file);
        });

        animateButton.addEventListener('click', async () => {
            if (!previewImg.src) {
                alert('Select a starting image');
                return;
            }

            try {
                const response = await fetch("https://api.runpod.ai/v2/osqu2dne1k9jg7/runsync", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": "Bearer <token>"
                    },
                    body: JSON.stringify({
                        "input" : {
                            "workflow": JSON.parse(document.getElementById('workflow').textContent),
                            "images": [{
                                "name": "input.png",
                                "image": previewImg.src
                            }]
                        }
                    })
                });

                const data = await response.json();
                console.log(stringify(data, null, 2))
            } catch (err) {
                console.log('Error: ' + err)
            }
        });


    </script>

    <script type="application/json" id="workflow">
        {"84":{"inputs":{"clip_name":"umt5-xxl-enc-bf16.safetensors","type":"wan","device":"default"},"class_type":"CLIPLoader","_meta":{"title":"LoadCLIP"}},"90":{"inputs":{"vae_name":"Wan2_1_VAE_bf16.safetensors"},"class_type":"VAELoader","_meta":{"title":"LoadVAE"}},"116":{"inputs":{"model_name":"Wan2_2-I2V-A14B-HIGH_bf16.safetensors","weight_dtype":"default","compute_dtype":"default","patch_cublaslinear":false,"sage_attention":"auto","enable_fp16_accumulation":true},"class_type":"DiffusionModelLoaderKJ","_meta":{"title":"DiffusionModelLoaderKJ"}},"117":{"inputs":{"model_name":"Wan2_2-I2V-A14B-LOW_bf16.safetensors","weight_dtype":"default","compute_dtype":"default","patch_cublaslinear":false,"sage_attention":"auto","enable_fp16_accumulation":true},"class_type":"DiffusionModelLoaderKJ","_meta":{"title":"DiffusionModelLoaderKJ"}},"128":{"inputs":{"step":2,"sigmas":["298",0]},"class_type":"SplitSigmas","_meta":{"title":"SplitSigmas"}},"136":{"inputs":{"width":480,"height":832,"upscale_method":"lanczos","keep_proportion":"crop","pad_color":"0,0,0","crop_position":"center","divisible_by":2,"device":"cpu","image":["294",0]},"class_type":"ImageResizeKJv2","_meta":{"title":"ResizeImagev2"}},"294":{"inputs":{"image":"input.png"},"class_type":"LoadImage","_meta":{"title":"LoadImage"}},"295":{"inputs":{"pixels":["136",0],"vae":["90",0]},"class_type":"VAEEncode","_meta":{"title":"VAEEncode"}},"297":{"inputs":{"shift":8,"model":["300",0]},"class_type":"ModelSamplingSD3","_meta":{"title":"ModelSamplingSD3"}},"298":{"inputs":{"scheduler":"simple","steps":4,"denoise":1,"model":["297",0]},"class_type":"BasicScheduler","_meta":{"title":"BasicScheduler"}},"299":{"inputs":{"sampler_name":"euler"},"class_type":"KSamplerSelect","_meta":{"title":"KSamplerSelect"}},"300":{"inputs":{"lora_name":"SVI_v2_PRO_Wan2.2-I2V-A14B_HIGH_lora_rank_128_fp16.safetensors","strength_model":1,"model":["301",0]},"class_type":"LoraLoaderModelOnly","_meta":{"title":"LoraLoaderModelOnly"}},"301":{"inputs":{"lora_name":"wan2.2_i2v_A14b_high_noise_lora_rank64_lightx2v_4step_1022.safetensors","strength_model":1,"model":["116",0]},"class_type":"LoraLoaderModelOnly","_meta":{"title":"LoraLoaderModelOnly"}},"304":{"inputs":{"lora_name":"SVI_v2_PRO_Wan2.2-I2V-A14B_LOW_lora_rank_128_fp16.safetensors","strength_model":1,"model":["306",0]},"class_type":"LoraLoaderModelOnly","_meta":{"title":"LoraLoaderModelOnly"}},"306":{"inputs":{"lora_name":"wan2.2_i2v_A14b_low_noise_lora_rank64_lightx2v_4step_1022.safetensors","strength_model":1,"model":["117",0]},"class_type":"LoraLoaderModelOnly","_meta":{"title":"LoraLoaderModelOnly"}},"480":{"inputs":{"fps":16,"images":["336:328",0]},"class_type":"CreateVideo","_meta":{"title":"CreateVideo"}},"481":{"inputs":{"filename_prefix":"video","format":"mp4","codec":"h264","video":["480",0]},"class_type":"SaveVideo","_meta":{"title":"SaveVideo"}},"315:312":{"inputs":{},"class_type":"DisableNoise","_meta":{"title":"DisableNoise"}},"315:308":{"inputs":{"text":"色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走","clip":["84",0]},"class_type":"CLIPTextEncode","_meta":{"title":"CLIPTextEncode(Prompt)"}},"315:310":{"inputs":{"noise":["315:309",0],"guider":["315:121",0],"sampler":["299",0],"sigmas":["128",0],"latent_image":["315:134",2]},"class_type":"SamplerCustomAdvanced","_meta":{"title":"SamplerCustomAdvanced"}},"315:307":{"inputs":{"text":"","clip":["84",0]},"class_type":"CLIPTextEncode","_meta":{"title":"CLIPTextEncode(Prompt)"}},"315:313":{"inputs":{"samples":["315:311",0],"vae":["90",0]},"class_type":"VAEDecode","_meta":{"title":"VAEDecode"}},"315:311":{"inputs":{"noise":["315:312",0],"guider":["315:124",0],"sampler":["299",0],"sigmas":["128",1],"latent_image":["315:310",0]},"class_type":"SamplerCustomAdvanced","_meta":{"title":"SamplerCustomAdvanced"}},"315:134":{"inputs":{"length":81,"motion_latent_count":1,"positive":["315:307",0],"negative":["315:308",0],"anchor_samples":["295",0]},"class_type":"WanImageToVideoSVIPro","_meta":{"title":"WanImageToVideoSVIPro"}},"315:309":{"inputs":{"noise_seed":2025},"class_type":"RandomNoise","_meta":{"title":"RandomNoise"}},"315:121":{"inputs":{"cfg":1,"start_percent":0,"end_percent":1,"model":["300",0],"positive":["315:134",0],"negative":["315:134",1]},"class_type":"ScheduledCFGGuidance","_meta":{"title":"ScheduledCFGGuidance"}},"315:124":{"inputs":{"cfg":1,"start_percent":0,"end_percent":1,"model":["304",0],"positive":["315:134",0],"negative":["315:134",1]},"class_type":"ScheduledCFGGuidance","_meta":{"title":"ScheduledCFGGuidance"}},"336:325":{"inputs":{},"class_type":"DisableNoise","_meta":{"title":"DisableNoise"}},"336:331":{"inputs":{"cfg":1,"start_percent":0,"end_percent":1,"model":["304",0],"positive":["336:333",0],"negative":["336:333",1]},"class_type":"ScheduledCFGGuidance","_meta":{"title":"ScheduledCFGGuidance"}},"336:330":{"inputs":{"cfg":1,"start_percent":0,"end_percent":1,"model":["300",0],"positive":["336:333",0],"negative":["336:333",1]},"class_type":"ScheduledCFGGuidance","_meta":{"title":"ScheduledCFGGuidance"}},"336:332":{"inputs":{"noise_seed":2325},"class_type":"RandomNoise","_meta":{"title":"RandomNoise"}},"336:335":{"inputs":{"text":"色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走","clip":["84",0]},"class_type":"CLIPTextEncode","_meta":{"title":"CLIPTextEncode(Prompt)"}},"336:334":{"inputs":{"text":"","clip":["84",0]},"class_type":"CLIPTextEncode","_meta":{"title":"CLIPTextEncode(Prompt)"}},"336:328":{"inputs":{"samples":["336:327",0],"vae":["90",0]},"class_type":"VAEDecode","_meta":{"title":"VAEDecode"}},"336:326":{"inputs":{"noise":["336:332",0],"guider":["336:330",0],"sampler":["299",0],"sigmas":["128",0],"latent_image":["336:333",2]},"class_type":"SamplerCustomAdvanced","_meta":{"title":"SamplerCustomAdvanced"}},"336:327":{"inputs":{"noise":["336:325",0],"guider":["336:331",0],"sampler":["299",0],"sigmas":["128",1],"latent_image":["336:326",0]},"class_type":"SamplerCustomAdvanced","_meta":{"title":"SamplerCustomAdvanced"}},"336:329":{"inputs":{"overlap":5,"overlap_side":"source","overlap_mode":"linear_blend","source_images":["315:313",0],"new_images":["336:328",0]},"class_type":"ImageBatchExtendWithOverlap","_meta":{"title":"ImageBatchExtendWithOverlap"}},"336:333":{"inputs":{"length":81,"motion_latent_count":1,"positive":["336:334",0],"negative":["336:335",0],"anchor_samples":["295",0],"prev_samples":["315:311",0]},"class_type":"WanImageToVideoSVIPro","_meta":{"title":"WanImageToVideoSVIPro"}}}
    </script>
</body>
</html>
